name: Api-Gateway CI

on:
  push:
    paths:
      - '.github/workflows/api-gateway-service.yml'
      - '.github/workflows/template-ci.yml'
      - 'apps/api-gateway/**'
      - 'libs/**'
      - 'package.json'
      - 'yarn.lock'
      - 'jest.config.json'
      - 'eslint.config.js'
      - 'nest-cli.json'
      - 'tsconfig.json'
      - 'tsconfig.build.json'
  pull_request:
    paths:
      - '.github/workflows/api-gateway-service.yml'
      - '.github/workflows/template-ci.yml'
      - 'apps/api-gateway/**'
      - 'libs/**'
      - 'package.json'
      - 'yarn.lock'
      - 'jest.config.json'
      - 'eslint.config.js'
      - 'nest-cli.json'
      - 'tsconfig.json'
      - 'tsconfig.build.json'

jobs:
  api-gateway-pipeline:
    uses: ./.github/workflows/template-ci.yml
    with:
      service-name: 'api-gateway'
    secrets:
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_TOKEN: ${{ secrets.DOCKERHUB_TOKEN }}
